# Роутер

**Роутер** — это IP-адрес или префикс, определяющий, к какому профилю будет применяться входящий трафик.  

DosGate выполняет маршрутизацию пакетов внутри системы, сравнивая ip-адрес назначения в пакете с значением роутера. На основе этого сравнения принимается решение о том, в какой профиль следует направить трафик для дальнейшей обработки.  

Роутеры могут быть настроены для маршрутизации как отдельных **IP-адресов, так и целых подсетей с различными масками**, что позволяет гибко управлять  фильтрацией.  

## Принцип работы

1.Обнаружение интерфейса  
  
- Входящий трафик сначала попадает на интерфейс системы.  
- Интерфейсы могут быть сгруппированы в **арены**, которые представляют собой логические объединения интерфейсов.  

2.Анализ назначения трафика  

- После определения интерфейса система анализирует destination-адрес пакета.  
- Далее ищется соответствующий роутер в профилях DosGate, где указана сеть или конкретный IP-адрес, совпадающий с адресом назначения пакета.  

3.Выбор наилучшего совпадения  

>Если в системе определено несколько роутеров для одной сети, выбирается наиболее специфичный (с наибольшей маской).  
Например, если присутствуют два роутера:  

  - 185.66.86.0/24  
  - 185.66.86.36/32  
  
Трафик, адресованный `185.66.86.36`, будет направлен в профиль, содержащий роутер `185.66.86.36/32`, так как он более специфичен.
 Остальной трафик сети `185.66.86.0/24` будет обрабатываться в профиле с роутером `/24`.